"use strict";(()=>{var Hn=Object.defineProperty;var i=(D,k)=>Hn(D,"name",{value:k,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["diffs"],{7274:(D,k,u)=>{var a=u(59753),q=u(11820);(0,a.on)("click",".js-conversation-menu-button",function(){let e=!0;return async function(t){if(e===!1){const o=t.currentTarget.closest(".select-menu").querySelector("details-menu");if(!o)return;o.innerHTML="";const r=`${o.getAttribute("src")}?instrument=1`,c=await fetch(r);c.ok&&(o.innerHTML=await c.text())}e=!1}}()),(0,a.on)("click",".js-conversations-menu-item",function(e){const t=e.currentTarget,n=t.closest(".js-conversations-details");n.hasAttribute("open")&&n.removeAttribute("open"),window.location.hash=t.hash,(0,q.kc)(document)}),(0,a.on)("click",".js-resolved-conversations",async function(e){const t=e.currentTarget.querySelector(".dropdown-caret"),n=e.currentTarget.querySelector(".select-menu-header");L(t),n.classList.toggle("border-bottom-0")});function L(e){e.style.transform===""?e.style.transform="rotate(180deg)":e.style.transform=""}i(L,"flipCaret");var R=u(6741),x=u(33948),d=u(64463),S=u(62760);(0,a.on)("details:toggled-group",".js-file.js-details-container",function(e){e.target===e.currentTarget&&_(e.detail.open)}),(0,a.on)("details:toggled",".js-file.js-details-container",function(e){if(e.target!==e.currentTarget)return;const t=e.currentTarget;t.getBoundingClientRect().top<0&&(0,q.zT)(t)}),(0,x.Z)(()=>{const e=window.location.hash.slice(1);if(!e)return;const t=document.getElementsByName(e)[0];if(!t)return;const n=t.nextElementSibling;n&&n.matches(".js-file.js-details-container")&&(n.classList.add("open"),n.classList.add("Details--on"))}),(0,d.N7)(".js-file-header-dropdown",{subscribe:e=>(0,R.RB)(e,"toggle",M)});function M({currentTarget:e}){const t=e,n=t.hasAttribute("open");t.closest(".js-file-header").classList.toggle("has-open-dropdown",n)}i(M,"toggleFileHeaderMenu");function _(e){if(!document.querySelector(".js-file-filter"))return;const n=U();for(const r of n)r.checked=e;const s=W();s&&(s.checked=!e);const o=ee();At(o),wt(o),Et(),Lt(),Ct(),(0,S.X)(o,qe(),Y(),N(),g(),A(),C(),te())}i(_,"toggledAllFileContents");function Y(){return Array.from(U()).filter(t=>t.checked).map(t=>t.value)}i(Y,"getSelectedFileTypes");function U(){return document.querySelectorAll(".js-diff-file-type-option")}i(U,"getFileTypeOptions");function W(){const e=document.querySelector(".js-deleted-files-toggle");if(e instanceof HTMLInputElement)return e}i(W,"getDeletedFilesInput");function ee(){return E()||C()||te()||N()||A()}i(ee,"fileFilterActive");function N(){return g().length>0}i(N,"codeownerFilterActive");function g(){const e=document.querySelectorAll(".js-diff-owner-option");return Array.from(e).filter(n=>n.checked).map(n=>n.value)}i(g,"getSelectedOwners");function E(){return Y().length!==U().length}i(E,"fileTypeFilterActive");function A(){const e=document.querySelector(".js-manifests-option");return e?e.checked:!1}i(A,"manifestFilterActive");function C(){const e=W();return e?!e.checked:!1}i(C,"deletedFilterActive");function te(){const e=document.querySelector(".js-viewed-files-toggle");return e?!e.checked:!1}i(te,"viewedFilterActive");function qe(){return new URLSearchParams(window.location.search).has("w")}i(qe,"whitespaceFilterActive");function At(e){document.querySelector(".js-file-filter-text").classList.toggle("color-fg-accent",e)}i(At,"toggleHighlightActiveFilter");function wt(e){const t=document.querySelector(".js-reset-filters"),n=document.querySelector(".js-commits-filtered");t!=null&&!n&&(t.hidden=!e)}i(wt,"toggleResetFileFiltersButton");function Lt(){const e=E(),t=document.querySelector(".js-file-filter-select-all-container"),n=e?"data-select-all-markup":"data-all-selected-markup",s=t.getAttribute(n);t.textContent=s,t.classList.toggle("color-fg-muted",!e),t.classList.toggle("color-fg-accent",e)}i(Lt,"toggleSelectAll");function Et(){const e=U(),t=C();for(const n of e)if(t){const s=n.getAttribute("data-non-deleted-files-count")==="0";n.disabled=s}else n.disabled=!1}i(Et,"toggleAvailableOptions");function Ct(){const e=document.querySelectorAll(".js-file-type-count");for(const t of e){const n=C()?"data-non-deleted-file-count-markup":"data-all-file-count-markup",s=t.getAttribute(n);s&&(t.textContent=s)}}i(Ct,"toggleFileTypeCounts");function Tt(){const e=document.querySelector(".js-file-filter-blankslate");if(!e)return;if(document.querySelectorAll(".js-diff-progressive-loader").length>0){e.hidden=!0;return}const n=document.querySelectorAll(".js-file");if(n.length===0){e.hidden=!0;return}const s=Array.from(n).some(o=>!o.hidden);e.hidden=s}i(Tt,"checkEmptyFilterResults"),(0,a.on)("click",".js-jump-to-menu-item",function({currentTarget:e}){const t=e.getAttribute("href").substring(1),n=document.querySelector(`[data-anchor="${t}"]`);if(n){const s=n.closest(".js-file.js-details-container");s.hidden=!1}Tt()});var ie=u(97730),ce=u(68957),ye=u(69567),le=u(56238),xe=u(29719),ve=u(12981),V=u(65935);const Se="```suggestion",ae="```",qt=new RegExp(`${Se}(?:.*)
`,"i"),xt=new RegExp(`${ae}(
|$)`);function Ie(e,t){const n=e.slice(0,t).split(`
`);return e.split(`
`)[n.length-1]}i(Ie,"lineAtIndex");function Me(e){const n=/^(\s+)/.exec(e);return n&&n[0]||""}i(Me,"leadingWhitespace");function It(e){let t=`${Se}
`;return t+=`${e}
`,t+=ae,t}i(It,"formatSuggestion");function de(e,t,n=0){const s=t.substring(n,t.length),o=e.exec(s);return o?o.index+n:-1}i(de,"findNextOccurrenceOf");function Fe(e,t){const n=[];let s=0,o=-1;for(;(o=de(qt,e,s))>-1;){s=o+Se.length;const r=de(xt,e,s);if(r===-1)return!1;s=r+ae.length,n.push([o,r])}return n.some(r=>t>r[0]&&t<r[1])}i(Fe,"cursorInSuggestionBlock");function Mt(e){const t=e.selectionStart;if(!Fe(e.value,t))return!1;const n=e.value,s=Ie(n,t);if(s===null)return!1;const r=`
${Me(s)}`,c=n.substr(0,t)+r+n.substr(t);(0,le.Se)(e,c);const l=t+r.length;return e.setSelectionRange(l,l),!0}i(Mt,"insertNewSuggestionLine");function Ft(e,t){const n=It(e),s=t.selectionStart,o=t.value,r=de(/\n/,o,s),c=o.trim()==="",l=Ie(o,s),h=l.trim()==="",m=`
${ae}`.length;let f=o,p=0;if(c)f=n,p=f.length-m;else if(r===-1)h?(f=o+n,p=f.length-m):(f=[o,n].join(`
`),p=f.length-m);else if(h){const b=Me(l),j=s-b.length,y=o.substring(0,j),T=o.substring(r,o.length);f=[y,n,T].join(""),p=f.length-T.length-m}else if(Fe(o,s)){const b=de(/```/,o,s)+3,j=o.substring(0,b),y=o.substring(b,o.length);f=[j,`
`,n,y].join(""),p=f.length-y.length-m}else{const b=o.substring(0,r),j=o.substring(r,o.length);f=[b,`
`,n,j].join(""),p=f.length-j.length-m}(0,le.Se)(t,f),t.focus(),t.setSelectionRange(p,p)}i(Ft,"insertSuggestionBlock");var ke=u(45075),ue=u(78965);const I={addToBatchEnabled:".js-add-to-batch-enabled",unchangedSuggestion:".js-unchanged-suggestion",closedOrMergedPull:".js-closed-pull",viewingSubset:".js-viewing-subset-changes",leftBlob:".js-validation-on-left-blob",rightBlob:".js-validation-on-right-blob",outdatedComment:".js-outdated-comment",resolvedThread:".js-resolved-thread",pendingReview:".js-pending-review",isMultiLine:".js-is-multiline",inMergeQueue:".js-in-merge-queue"};function kt(e){const t=e.getAttribute("data-lines");if(t!=null){const s=e.closest(".js-suggested-changes-container").querySelector(".js-comment-field");Ft(t,s)}}i(kt,"renderSuggestionBlock");function Re(e,t){const n=document.querySelectorAll(".js-apply-suggestion-button"),s=e.querySelector(".js-disabled-apply-suggestion-button");for(const o of n){const r=s.cloneNode(!0);z(r,t),o.closest("details").replaceWith(r)}}i(Re,"disableAllApplySuggestionButtons");function _e(e){const t=document.querySelector(".js-batched-suggested-changes-container");t&&t.classList.add("d-none");for(const n of document.querySelectorAll(".js-apply-single-suggestion"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-add"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-remove"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-pending-batched-suggestion-label"))n.classList.add("d-none")}i(_e,"disableBatchSuggestionsButtons");function z(e,t){e.setAttribute("aria-label",t),e.classList.remove("d-none")}i(z,"displayButton");function je(e,t){const n=document.querySelector(".js-suggested-changes-inline-validation-template").cloneNode(!0);n.classList.remove("js-suggested-changes-inline-validation-template");const s=n.querySelector(".js-suggested-changes-inline-error-message");s.textContent=e.trim(),t.parentNode.insertBefore(n,t.nextSibling)}i(je,"validateOnPreview"),(0,a.on)("click",".js-suggested-change-toolbar-item",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&t.getAttribute("aria-disabled")==="false"&&kt(t)}),(0,a.on)("click",".js-refresh-after-suggestion",ue.H5);function Oe(e){if(!document.querySelector(".js-suggested-changes-subset-files"))return;const n=e.querySelectorAll(".js-suggested-change-toolbar-item"),s=I.viewingSubset;if(!s)return;const o=document.querySelector(s).textContent.trim();for(const r of n){r.setAttribute("aria-disabled","true");const c=r.getAttribute("aria-describedby"),l=document.getElementById(c);l.textContent=o}}i(Oe,"validateInlineCommmentsContainer"),(0,d.N7)(".js-inline-comments-container",{add(e){Oe(e)}}),(0,d.N7)(".js-preview-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=document.querySelector(I.rightBlob).textContent,s=document.querySelector(I.leftBlob).textContent,o=e.closest(".js-suggested-changes-blob");if(t.getAttribute("data-thread-side")!==""){if(t.getAttribute("data-thread-side")==="left")return je(s,o),e.remove()}else{const f=e.closest(".js-inline-comment-form"),p=f.querySelector('input[name="side"]');if(!f||!p)return e.remove();if(f&&p.value==="left")return je(s,o),e.remove()}const r=e.previousElementSibling,c=r.querySelector(".js-blob-code-deletion"),l=r.querySelectorAll(".js-blob-code-addition");if(!c||l.length===0)return;const h=c.textContent,m=Array.from(l).map(f=>f.textContent);if(h===m.join(`
`))return je(n,o),e.remove();e.remove()}}),(0,d.N7)(".js-comment-body .js-apply-changes",{add(e){const t=e.closest(".js-comment");if(!t)return e.remove();const n=t.querySelector(".js-suggested-changes-template");if(!(n instanceof HTMLTemplateElement))return e.remove();const s=n.content.cloneNode(!0),o=s.querySelector(".js-disabled-apply-suggestion-button");let r;try{r=s.querySelector(".js-batched-suggested-changes-add")}catch(v){if(v.name!=="QueryError")throw v}if(document.querySelectorAll(".js-suggested-changes-files-tab").length){const v=document.querySelector(I.addToBatchEnabled).textContent;r&&(r.removeAttribute("disabled"),r.setAttribute("aria-label",v))}const c=document.querySelector(".js-pull-header-details"),l=c&&c.getAttribute("data-pull-is-open")==="true",h=e.closest(".js-resolvable-timeline-thread-container"),m=n.getAttribute("data-comment-pending")==="true",f=n.getAttribute("data-in-merge-queue")==="true",p=t.classList.contains("js-selection-contains-deletions");if(h&&h.getAttribute("data-resolved")==="true"){const v=document.querySelector(I.resolvedThread).textContent,P=s.querySelector("details");return P&&P.remove(),z(o,v),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",v)),e.replaceWith(s)}if(!l){const v=document.querySelector(I.closedOrMergedPull).textContent;return z(o,v),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",v)),e.replaceWith(s)}if(f){const v=document.querySelector(I.inMergeQueue);let P="";v&&(P=v.textContent||"");const H=s.querySelector("details");return H&&H.remove(),z(o,P),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",P)),e.replaceWith(s)}if(m){const v=document.querySelector(I.pendingReview).textContent;return s.querySelector("details").remove(),z(o,v),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",v)),e.replaceWith(s)}if(p){const v=document.querySelector(I.leftBlob).textContent;return s.querySelector("details").remove(),z(o,v),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",v)),e.replaceWith(s)}const b=document.querySelector(".js-suggested-changes-subset-files"),j=n.getAttribute("data-outdated-comment")==="true";if(b||j){let v;return b?v=document.querySelector(I.viewingSubset).textContent:j&&(v=document.querySelector(I.outdatedComment).textContent),s.querySelector("details").remove(),z(o,v),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",v)),e.replaceWith(s)}const y=s.querySelector(".js-single-suggested-change-form"),T=e.closest(".js-suggested-changes-blob");if(T){const v=T.querySelectorAll(".js-blob-code-deletion"),P=T.querySelectorAll(".js-blob-code-addition");if(!v)return;const H=Array.from(v).map(B=>B.textContent),J=Array.from(P).map(B=>B.textContent);if(H.length===J.length&&H.every((B,X)=>B===J[X])){const B=document.querySelector(I.unchangedSuggestion).textContent;s.querySelector("details").remove(),z(o,B),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",B))}else for(const B of J){const X=document.createElement("input");X.setAttribute("type","hidden"),X.setAttribute("name","value[]"),X.value=B,y.appendChild(X)}}e.replaceWith(s)}}),(0,d.N7)(".js-pull-header-details",{add(e){const t=e.getAttribute("data-pull-is-open")==="true",n=document.querySelector(".js-suggested-changes-template");if(t||!(n instanceof HTMLTemplateElement))return;const s=n.content,o=document.querySelector(I.closedOrMergedPull).textContent;Re(s,o),_e(o)}}),(0,d.N7)(".js-suggested-changes-subset-files",{add(){const e=document.querySelector(".js-suggested-changes-template");if(!(e instanceof HTMLTemplateElement))return;const t=e.content,n=document.querySelector(I.viewingSubset).textContent;Re(t,n),_e(n)}}),(0,a.on)("click",".js-apply-suggestion-button",async function(e){const t=e.currentTarget.parentElement;if(t){const n=t.querySelector(".js-suggestion-commit-title");setTimeout(()=>n.focus(),1)}}),(0,a.on)("click",".js-dismiss-suggested-change-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok){const r=document.querySelectorAll(".js-suggested-change-onboarding-notice");for(const c of r)c.remove()}}),(0,ke.w4)("keypress",".js-comment-field",function(e){if(e.key==="Enter"){const t=e.target;Mt(t)&&e.preventDefault()}}),(0,ke.w4)("keypress",".js-suggestion-commit-message",function(e){const t=e.currentTarget;e.key==="Enter"&&t.setAttribute("rows","3")});function Rt(e){const n=e.closest(".js-review-state-classes").querySelectorAll("[data-pending-batched-suggestion]").length;for(const o of document.querySelectorAll(".js-pending-batched-suggested-changes-count"))o.textContent=String(n);const s=document.querySelector(".js-reenable-add-to-batch").textContent;for(const o of document.querySelectorAll("[data-batched-suggestion-reenable-sibling]"))o.removeAttribute("data-batched-suggestion-reenable-sibling"),o.removeAttribute("disabled"),o.setAttribute("aria-label",s);if(n>0){e.hidden=!1;const o=e.querySelector(".js-batched-suggested-changes-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0});for(const r of document.querySelectorAll(".js-apply-single-suggestion"))r.classList.add("d-none");for(const r of document.querySelectorAll(".js-batched-suggested-changes-add")){const c=r.closest(".js-suggested-change-form-container");c.getAttribute("data-pending-batched-suggestion")==="true"||c.getAttribute("data-comment-pending")==="true"||c.getAttribute("data-outdated-comment")==="true"?r.classList.add("d-none"):r.classList.remove("d-none"),r.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true"&&(r.removeAttribute("data-batched-suggestion-disabled-by-sibling"),r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",document.querySelector(".js-one-suggestion-per-line").textContent))}for(const r of document.querySelectorAll(".js-batched-suggested-changes-remove"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none");for(const r of document.querySelectorAll(".js-focus-commit-suggestions-form-button")){const c=r.closest(".js-suggested-change-form-container"),l=c.getAttribute("data-comment-pending")==="true",h=c.getAttribute("data-outdated-comment")==="true",m=c.getAttribute("data-resolved-comment")==="true",b=r.closest(".js-inline-comments-container").querySelector('input[name="side"]').value==="left";l||h||m||b?r.classList.add("d-none"):r.classList.remove("d-none")}for(const r of document.querySelectorAll(".js-pending-batched-suggestion-label"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none")}else{e.hidden=!0;for(const o of document.querySelectorAll(".js-apply-single-suggestion"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-add"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-remove"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-pending-batched-suggestion-label"))o.classList.add("d-none")}}i(Rt,"updatePendingSuggestionsState");function Be(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>Rt(e))}i(Be,"updatePendingSuggestionsHandler"),(0,a.on)("click",".js-batched-suggested-changes-add",function(e){const t=e.target,n=t.closest(".js-suggested-change-form-container");if(n.getAttribute("data-comment-pending")==="true"||n.getAttribute("data-outdated-comment")==="true"||t.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true")return;n.setAttribute("data-pending-batched-suggestion","true");const s=t.closest(".js-inline-comments-container");for(const o of s.querySelectorAll(".js-batched-suggested-changes-add"))o.setAttribute("data-batched-suggestion-disabled-by-sibling","true");t.removeAttribute("data-batched-suggestion-disabled-by-sibling"),Be()}),(0,a.on)("click",".js-batched-suggested-changes-remove",function(e){e.currentTarget.closest(".js-suggested-change-form-container").removeAttribute("data-pending-batched-suggestion");const n=e.currentTarget.closest(".js-inline-comments-container");for(const s of n.querySelectorAll(".js-batched-suggested-changes-add"))s.setAttribute("data-batched-suggestion-reenable-sibling","true");Be()}),(0,a.on)("click",".js-focus-commit-suggestions-form-button",function(e){e.preventDefault(),window.location.href="#clear-commit-suggestions",window.location.href="#commit-suggestions"}),(0,a.on)("click",".js-dismiss-batched-suggested-changes-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","batched_suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok)for(const r of document.querySelectorAll(".js-batched-suggested-change-onboarding-notice"))r.remove()});function De(e,t){const n=e.querySelector("input[name=commit_title]"),s=e.querySelector("textarea[name=commit_message]");let o=n.value.trim();o===""&&(o=n.defaultValue);const r=s.value.trim();r!==""&&(o=`${o}

${r}
`),n.disabled=!0,s.disabled=!0;const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","message"),c.value=o,e.appendChild(c);const l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","changes"),l.value=JSON.stringify(t),e.appendChild(l)}i(De,"convertFormInputs"),(0,a.on)("click",".js-single-suggested-change-form .js-suggested-changes-submit",function(e){const n=e.currentTarget.closest(".js-single-suggested-change-form"),s=Array.from(n.querySelectorAll('input[name="value[]"]')).map(r=>r.value),o=[{commentId:n.querySelector("input[name=comment_id]").value,path:n.querySelector("input[name=path]").value,suggestion:s}];De(n,o)}),(0,V.AC)(".js-single-suggested-change-form",async function(e,t){const n=e.closest(".js-suggested-change-form-container"),s=e.closest("details"),o=n.querySelector(".js-suggestion-applied"),c=e.closest(".js-suggested-changes-contents").querySelector(".js-error-message-placeholder");try{await t.json(),o.classList.remove("d-none"),n.querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove(),(0,ue.H5)()}catch(l){if(l.name!=="QueryError"){const h=l.response.json&&l.response.json.error,m=c.querySelector(".js-error-message");c.hidden=!1,m.textContent=h,n.prepend(c),e.closest(".js-suggested-change-form-container").querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove()}}}),(0,a.on)("click",".js-suggestion-batch-submit",function(e){const t=e.currentTarget.closest(".js-batched-suggested-changes-form"),n=[];for(const s of document.querySelectorAll("[data-pending-batched-suggestion]")){const o=s.querySelector(".js-single-suggested-change-form"),r=Array.from(o.querySelectorAll('input[name="value[]"]')).map(c=>c.value);n.push({commentId:o.querySelector("input[name=comment_id]").value,path:o.querySelector("input[name=path]").value,suggestion:r})}De(t,n)}),(0,V.AC)(".js-batched-suggested-changes-form",async function(e,t){try{await t.json();const n=e.closest(".js-batched-suggested-changes-container");n.hidden=!0,(0,ue.H5)()}catch(n){const s=n.response.json&&n.response.json.error,r=e.closest(".js-batched-suggested-changes-container").querySelector(".js-error-message-container"),c=r.querySelector(".js-error-message");c.textContent=s,r.hidden=!1}}),(0,d.N7)(".js-files-tab-stale",{add(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>{e.hidden=!0})}});let _t=0;(0,a.on)("click",".js-add-single-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Ne(n);const s=Ot(t)||Bt(t),o=He(s.querySelector("td"),t),r=o.querySelector(".js-inline-comment-form");r instanceof HTMLFormElement&&Qe(r,t),(0,ie.j)(o)});function Ot(e){const t=e.closest("tr"),n=Pe(t,".js-inline-comments-container");if(n instanceof Element)return n}i(Ot,"existingCommentRow");function Pe(e,t){const n=e.nextElementSibling;return n&&n.matches(t)?n:null}i(Pe,"next");function Bt(e){const t=e.closest("tr"),n=Ae("js-inline-comments-single-container-template",e).firstElementChild;return t.after(n),n}i(Bt,"insertCommentRow");function He(e,t){const n=Array.from(e.querySelectorAll(".review-comment-form-container")).pop();if(n)return n.closest("div.js-line-comments");{const s=Ae("js-inline-comments-single-container-template",t).querySelector("div.js-line-comments");return e.appendChild(s),s}}i(He,"findOrInsertCommentThread"),(0,a.on)("click",".js-add-split-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Ne(n);const s=t.closest("tr"),o=t.getAttribute("data-type")==="addition"?"js-addition":"js-deletion",r=Wt(s),c=Ut(r,o,t),l=He(c,t),h=l.querySelector(".js-inline-comment-form");h instanceof HTMLFormElement&&Qe(h,t),(0,ie.j)(l)}),(0,V.AC)(".js-inline-comment-form",async function(e,t){Dt(e);let n;try{n=await t.json()}catch(l){if(l.response){let h;try{h=l.response.json}catch{}if(h){Pt(e,h);return}}throw l}const s=n.json,o=s.inline_comment,r=e.closest(".js-line-comments");o&&r.querySelector(".js-comments-holder").append((0,ve.r)(document,o));const c=s.inline_comment_thread;c&&r.replaceWith((0,ve.r)(document,c)),(0,ie.w)(e)});function Dt(e){const t=e.querySelector(".js-comment-form-error");t&&(t.hidden=!0,t.textContent=null)}i(Dt,"resetInlineCommentError");function Pt(e,t){const n=e.querySelector(".js-comment-form-error");let s;t.errors?Array.isArray(t.errors)?s=t.errors.join(", "):s=t.errors:s="There was an error posting your comment.",n.textContent=s,n.style.display="block",n.hidden=!1,n.classList.remove("d-none")}i(Pt,"handleInlineCommentError");function Ht(e){const[t,n]=e.match(/^new_inline_comment_(?:discussion|diff)_(?:[\w-]+)_(\d+)_(\d+)$/)||[];if(!t)return;const s=document.querySelector(`.js-inline-comment-form input[name='in_reply_to'][value='${n}']`);if(!s)return;const o=s.closest(".js-line-comments");o&&(0,ie.j)(o)}i(Ht,"showReplyForm");function Nt(e){const[t,n]=e.match(/^new_inline_comment_diff_(?:[\w-]+)_(\d+)$/)||[];if(!t)return;const s=document.querySelector(`.js-add-line-comment[data-anchor='${t}'][data-position='${n}']`);s&&s.click()}i(Nt,"showCommentForm"),document.addEventListener("session:resume",function(e){const t=e.detail;Ht(t.targetId),Nt(t.targetId)});function Ne(e){const t=e.querySelector(".js-toggle-file-notes");t instanceof HTMLInputElement&&(0,le.Se)(t,!0)}i(Ne,"ensureInlineNotesEnabled");function $e(){for(const e of document.querySelectorAll(".file .js-inline-comments-container")){const n=e.querySelectorAll(".js-comments-holder > *").length>0,s=e.querySelector("[data-resolved='true']")!=null,o=e.querySelector(".js-inline-comment-form-container"),r=!!o&&o.classList.contains("open");!(n||s)&&!r&&e.remove()}}i($e,"cleanupInlineCommentContainers"),(0,d.N7)(".js-comment",{remove:$e}),(0,a.on)("inlinecomment:focus",".js-inline-comment-form-container",function(e){const t=e.target.querySelector(".js-suggested-changes-container");t&&Ue(t)}),(0,d.N7)(".js-suggested-changes-container.is-comment-editing",e=>{Ue(e)});function $t(e,t){const n=new URLSearchParams(e.search.slice(1)),s=t.elements.namedItem("in_reply_to")||t.elements.namedItem("comment_id"),o=t.querySelector("textarea");if(n.append("textarea_id",o.id),s instanceof HTMLInputElement&&s.value)return n.append("comment_id",s.value),n;const r=t.elements.namedItem("path"),c=t.elements.namedItem("start_side"),l=t.elements.namedItem("start_line"),h=t.elements.namedItem("side"),m=t.elements.namedItem("line"),f=t.elements.namedItem("start_commit_oid"),p=t.elements.namedItem("end_commit_oid"),b=t.elements.namedItem("base_commit_oid");return!(r instanceof HTMLInputElement)||!(c instanceof HTMLInputElement)||!(l instanceof HTMLInputElement)||!(h instanceof HTMLInputElement)||!(m instanceof HTMLInputElement)||!(f instanceof HTMLInputElement)||!(p instanceof HTMLInputElement)||!(b instanceof HTMLInputElement)?null:(n.append("path",r.value),n.append("start_side",c.value),n.append("start_line",l.value),n.append("end_side",h.value),n.append("end_line",m.value),n.append("start_commit_oid",f.value),n.append("end_commit_oid",p.value),n.append("base_commit_oid",b.value),n)}i($t,"paramsForSuggestionButton");async function Ue(e){const t=e.querySelector(".js-suggestion-button-placeholder");if(!t)return;const n=t.getAttribute("data-src-base");if(!n)return;const s=new URL(n,window.location.origin),o=t.closest(".js-inline-comment-form")||t.closest(".js-comment-update");if(!(o instanceof HTMLFormElement))return;const r=$t(s,o);if(!r)return;s.search=r.toString();const c=await(0,xe.a)(document,s.toString());t.innerHTML="",t.appendChild(c)}i(Ue,"loadSuggestionButton"),document.addEventListener("inlinecomment:collapse",()=>{$e()});function Ut(e,t,n){const s=e.querySelector(`.js-line-comments.${t}`);if(s)return s;const o=Ae("js-inline-comments-split-form-container-template",n).firstElementChild;o.classList.add(t);const r=e.querySelectorAll(`.${t}`);r[r.length-1].after(o);for(const l of r)l.remove();return o}i(Ut,"expandLineCommentsEmptyCells");function Wt(e){let t=Pe(e,".js-inline-comments-container");if(t)return t;{const n="js-inline-comments-split-container-template",s=document.getElementById(n);if(!s)throw new Error(`Could not find element with id ${n}`);if(!(s instanceof HTMLTemplateElement))throw new Error(`Found element with id ${n} - but was not a Template`);return t=new ye.R(s,{}).firstElementChild,e.after(t),t}}i(Wt,"inlineCommentsSplitContainerForLine");function We(e,t,n,s){if(e.classList.remove("color-bg-success","color-bg-danger"),s){e.textContent=t;return}if(n==="right"){e.classList.add("color-fg-success"),e.textContent=`+${t}`;return}if(n==="left"){e.classList.add("color-fg-danger"),e.textContent=`-${t}`;return}e.textContent=String(t)}i(We,"applyMultiLinePreview");const Ve={R:"right",L:"left"};function Vt(e,t){const n=(0,ce.vu)();if(!n||n.end.is(n.start))return;if(!(0,ce.Oz)(t,n)){(0,ce.MO)();return}const{start:{lineNumber:s},end:{lineNumber:o}}=n;let{start:{side:r},end:{side:c}}=n;const l=Number(t.getAttribute("data-line")),h=t.getAttribute("data-side");if(l!==o||!n.end.isContext()&&h!==Ve[c]){(0,ce.MO)();return}const m=Ve[r],f=e.elements.namedItem("start_line"),p=e.elements.namedItem("start_side"),b=e.elements.namedItem("line"),j=e.elements.namedItem("side"),y=e.elements.namedItem("preview_start_side"),T=e.elements.namedItem("preview_side");if(f instanceof HTMLInputElement&&p instanceof HTMLInputElement&&b instanceof HTMLInputElement&&j instanceof HTMLInputElement&&y instanceof HTMLInputElement&&T instanceof HTMLInputElement){f.value=String(s),p.value=m,p.value=y.value=p.value,T.value=j.value;const v=f.value;r=p.value;const P=b.value;c=j.value;const H=e.closest(".js-inline-comment-form-container");if(v&&P){const J=H.querySelector(".js-multi-line-preview"),jt=J.querySelector(".js-multi-line-preview-start"),B=J.querySelector(".js-multi-line-preview-end"),X=n.start.isContext(),Pn=n.end.isContext();We(jt,v,r,X),We(B,P,c,Pn),J.hidden=!1,H.classList.add("is-multiline")}else H.querySelector(".js-multi-line-preview").hidden=!0,H.classList.remove("is-multiline");Oe(H)}}i(Vt,"fillMultilineFormFields");function Qe(e,t){const n=["type","path","position","line","side","original-line"];for(const o of n){const r=e.elements.namedItem(o);if(r instanceof HTMLInputElement){const c=t.getAttribute(`data-${o}`)||"";r.value=c}}const s=e.getElementsByClassName("js-expanded-diff-placeholder-value")?.[0];if(s instanceof HTMLInputElement){const o=t.getAttribute("data-expanded-diff")||"";s.value=o}Vt(e,t)}i(Qe,"fillTemplateFormFields");function Ae(e,t){const n=document.getElementById(e);if(!n)throw new Error(`Could not find element with id ${e}`);if(!(n instanceof HTMLTemplateElement))throw new Error(`Found element with id ${e} - but was not a Template`);return new ye.R(n,{anchor:t.getAttribute("data-anchor")||"",position:t.getAttribute("data-position")||"",sequence:_t++})}i(Ae,"renderCommentTemplate");var ne=u(10178),Z=u(61161),Qt=u(55444);(0,d.N7)(".js-diff-progressive-container",function(e){ze(e);const t=e.querySelector(".js-diff-progressive-loader");!t||t.addEventListener("load",function(){ze(e)})});function zt(e,t){const n=e.querySelectorAll(".js-comment-container");for(const s of n){const o=s.getAttribute("data-hidden-comment-ids");if(o){const r=o.split(","),c=t.match(/\d+/g)?.[0];if(c&&r.includes(c)){(0,Qt.$)(s);break}}}}i(zt,"loadResolvedComments");function ze(e){const t=Ke();if(!t)return;Xe(e,t);const n=Kt(e,t);!n||((0,q.zT)(n),Ze(n))}i(ze,"processProgressiveContainer"),(0,d.N7)(".js-diff-load-container",function(e){const t=e.querySelector(".js-diff-entry-loader");!t||t.addEventListener("load",function(){e.closest(".js-file").classList.remove("hide-file-notes-toggle");const s=Ke();!s||Xe(e,s)})}),(0,a.on)("click",".js-diff-load",function(e){if(e.target.classList.contains("js-ignore-this"))return;const t=e.currentTarget.closest(".js-diff-load-container");Ze(t)});function Ke(){return window.location.hash.slice(1)}i(Ke,"urlAnchor");function Xe(e,t){let n;t.match(/^diff-.+[LR]\d+-[LR]\d+/)?n=(0,Z.Q)(e.ownerDocument,t.substring(0,t.indexOf("-",5))):n=(0,Z.Q)(e.ownerDocument,t),n&&e.contains(n)?((0,ne.O4)(n),(0,q.zT)(n)):zt(e,t)}i(Xe,"scrollToAnchor");function Kt(e,t){const n=Xt(e,t);return n||Zt(e,t)}i(Kt,"getEntryFromAnchor");function Xt(e,t){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(t);if(!n)return;const s=n[1],o=e.querySelector(`a[name='${s}']`);if(!o)return;const r=o.nextElementSibling;if(!(r&&!r.querySelector(".js-diff-load-container")))return r}i(Xt,"getEntryFromDiffAnchor");function Zt(e,t){const n=/^(?:r|commitcomment-)(\d+)$/.exec(t);if(!n)return;const s=n[1],o=e.querySelector(`#diff-with-comment-${s}`);return o?o.closest(".js-file"):void 0}i(Zt,"getEntryFromCommentAnchor");function Ze(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),s=e.querySelector("button.js-diff-load"),o=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const r=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=r.toString(),t.data}i(Ze,"loadDiff");var Gt=u(6170);(0,a.on)("click",".js-rendered, .js-source",function(e){const t=e.currentTarget;if(t.classList.contains("selected")){e.preventDefault();return}Jt(t),Yt(t)}),(0,V.AC)(".js-prose-diff-toggle-form",async function(e,t){const n=e.closest(".js-details-container"),s=n.querySelector(".js-file-content"),o=await t.html();for(;s.lastChild;)s.removeChild(s.lastChild);s.append(o.html),n.classList.toggle("display-rich-diff"),n.classList.toggle("show-inline-notes")});function Jt(e){const t=e.closest(".js-file-header"),n=e.classList.contains("js-rendered"),s=e.classList.contains("js-source"),o=t.getAttribute("data-short-path"),r=t.getAttribute("data-anchor"),c=new URL(window.location.href,window.location.origin),l=new URLSearchParams(c.search.slice(1));c.hash=r,n?l.set("short_path",o):s&&l.delete("short_path"),c.search=l.toString(),(0,Gt.lO)(null,"",c.toString())}i(Jt,"updateWindowLocation");function Yt(e){for(const t of document.querySelectorAll(".js-rendered, .js-source"))t.classList.remove("selected"),t.removeAttribute("aria-current");e.classList.add("selected"),e.setAttribute("aria-current","true")}i(Yt,"updateSelectedButton"),(0,a.on)("click",".js-toc-retry",function(e){if(!(e.target instanceof Element))return;const n=e.target.closest(".select-menu").querySelector("include-fragment"),s=n.getAttribute("src");n.setAttribute("src",""),n.setAttribute("src",s)});var en=u(44983);function Ge(e,t,n){const s=Array.from(e.querySelectorAll('[role="menuitem"]'));let o=s.indexOf(t),r=s.indexOf(n);if(o===-1)throw new Error("Couldn't find startIndex in container");if(r===-1)throw new Error("Couldn't find endItem in container");Je(e),s[r].classList.add("is-last-in-range"),o>r&&([o,r]=[r,o]);for(const c of s.slice(o,r+1))c.classList.add("is-range-selected")}i(Ge,"highlightSelectedRange");async function tn(e,t){function n(s){Ge(e,t,s.target.closest('[role="menuitem"]'))}i(n,"highlightRange"),Ge(e,t,t),e.addEventListener("mouseover",n),await new Promise(s=>window.addEventListener("keyup",s,{once:!0})),e.removeEventListener("mouseover",n),Je(e)}i(tn,"observeShiftRangeHighlights");function Je(e){for(const t of e.querySelectorAll('[role="menuitem"]'))t.classList.remove("is-range-selected","is-last-in-range")}i(Je,"resetHighlight"),(0,d.N7)(".js-diffbar-range-menu .js-diffbar-range-list",{subscribe:nn});function nn(e){const t=e.closest("details-menu");let n=!1;function s(r){n=r.shiftKey,n&&r.preventDefault()}i(s,"clicked");function o(r){if(!n)return;r.preventDefault();const c=r.detail.relatedTarget;if(c.classList.contains("is-range-selected")){r.stopPropagation();const l=e.querySelectorAll(".is-range-selected"),h=l[0],m=l[l.length-1],f=e.getAttribute("data-range-url"),p=h.getAttribute("data-parent-commit"),b=m.getAttribute("data-commit"),j=p&&b?`${p}..${b}`:b,y=f.replace("$range",j);(0,en.T)(y,{container:document.querySelector("#js-repo-pjax-container")})}else r.stopImmediatePropagation(),tn(e,c)}return i(o,"selected"),e.addEventListener("click",s,{capture:!0}),t.addEventListener("details-menu-select",o),{unsubscribe:()=>{e.removeEventListener("click",s,{capture:!0}),t.removeEventListener("details-menu-select",o)}}}i(nn,"manageRangeHighlight"),(0,a.on)("toggle",".js-diffbar-range-menu",function(e){const t=e.currentTarget;if(!t.hasAttribute("open"))return;const n=t.querySelector(".in-range");n&&n.focus()},{capture:!0});var Ye=u(5878);(0,a.on)("click",".js-compare-tab",function(e){for(const s of document.querySelectorAll(".js-compare-tab.selected"))s.classList.remove("selected");e.currentTarget.classList.add("selected");for(const s of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))s.classList.add("d-none");const n=e.currentTarget.hash;document.querySelector(n).classList.remove("d-none"),e.preventDefault()}),(0,x.Z)(function({target:e}){if(!(e instanceof HTMLElement))return;const t=e.closest("#commits_bucket, #files_bucket, #commit_comments_bucket");t&&t instanceof HTMLElement&&!(0,Ye.Z)(t)&&document.querySelector(`.js-compare-tab[href="#${t.id}"]`).click()}),(0,a.on)("click",".js-toggle-range-editor-cross-repo",function(){document.querySelector(".js-range-editor").classList.toggle("is-cross-repo")}),(0,a.on)("pjax:click",".js-range-editor",function(e){const t=document.querySelector(".js-compare-pr");if(t&&t.classList.contains("open")){const n=e.detail.options,s=new URL(n.url,window.location.origin);s.search.match(/expand=1/)||(s.search+=`${s.search?"&":""}expand=1`,n.url=s.toString())}}),(0,d.N7)(".js-compare-pr.open",{add(){document.body.classList.add("is-pr-composer-expanded")},remove(){document.body.classList.remove("is-pr-composer-expanded")}}),(0,a.on)("change",".js-collab-checkbox",function({currentTarget:e}){const t=e.form;for(const o of t.querySelectorAll(".errored"))o.classList.remove("errored");const s=e.closest(".js-collab-option").querySelector(".js-status-indicator");s.classList.remove("status-indicator-success","status-indicator-failed"),s.classList.add("status-indicator-loading")}),(0,V.AC)(".js-collab-form",async function(e,t){try{await t.text()}catch{for(const s of e.querySelectorAll(".status-indicator-loading")){s.classList.remove("status-indicator-loading"),s.classList.add("status-indicator-failed");const o=s.closest(".js-collab-option");o.classList.add("errored");const r=o.querySelector(".js-collab-checkbox");r.checked=!r.checked}for(const s of e.querySelectorAll(".status-indicator-success"))s.classList.remove("status-indicator-success");return}for(const n of e.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of e.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")});var w=u(35803),et=u(3447),sn=Object.defineProperty,on=Object.getOwnPropertyDescriptor,O=i((e,t,n,s)=>{for(var o=s>1?void 0:s?on(t,n):t,r=e.length-1,c;r>=0;r--)(c=e[r])&&(o=(s?c(t,n,o):c(o))||o);return s&&o&&sn(t,n,o),o},"__decorateClass"),tt=i((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},"__accessCheck"),G=i((e,t,n)=>(tt(e,t,"read from private field"),n?n.call(e):t.get(e)),"__privateGet"),fe=i((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},"__privateAdd"),me=i((e,t,n,s)=>(tt(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),"__privateSet"),se,oe,ge,re;let F=i(class extends HTMLElement{constructor(){super(...arguments),this.sidebarHidden=!1,fe(this,se,null),fe(this,oe,null),fe(this,ge,void 0),fe(this,re,void 0),this.handleSidebarScroll=()=>{me(this,se,requestAnimationFrame(this.updateSidebarHeight))},this.updateSidebarHeight=()=>{if(!this.sidebarContainer)return;const e=document.documentElement.clientHeight,t=this.diffToolbar.getBoundingClientRect(),n=this.mainContainer.getBoundingClientRect(),s=e>=n.bottom,o=t.top===0;let r;s?r=n.bottom-parseInt(this.sidebarContainer.style.top):o?r=e-t.height:r=e-parseInt(this.sidebarContainer.style.top),this.sidebarContainer.style.height=`${r}px`}}connectedCallback(){if(!this.sidebarContainer)return;me(this,re,new MutationObserver(this.handleNotificationShelfMutation)),G(this,re).observe(document.body,{subtree:!0,childList:!0});const{signal:e}=me(this,ge,new AbortController);window.addEventListener("scroll",this.handleSidebarScroll,{signal:e}),window.addEventListener("resize",()=>this.handleSidebarResize(),{signal:e}),this.handleSidebarScroll()}disconnectedCallback(){!this.sidebarContainer||(G(this,re).disconnect(),G(this,ge)?.abort(),G(this,se)!=null&&cancelAnimationFrame(G(this,se)),G(this,oe)!=null&&cancelAnimationFrame(G(this,oe)))}toggleSidebar(e){if(this.layoutContainer.classList.toggle("hx_Layout--sidebar-hidden"),this.sidebarHidden=!this.sidebarHidden,!this.fileTree)return;const t=e.detail.toggleButton;!t||(this.fileTree.instrumentToggleFileTree(t),!!this.fileTreePathFilter&&t.id==="show-file-tree-button"&&this.fileTreePathFilter.focus())}handleOpenFilesListHotkeyEvent(){if(this.shouldOpenTocMenu()){this.tocMenuButton.click();return}!this.fileTree||(this.showFileTreeButton&&this.sidebarHidden?this.showFileTreeButton.click():this.fileTreePathFilter&&!this.sidebarHidden&&this.fileTreePathFilter.focus())}shouldOpenTocMenu(){return!!(this.tocMenu&&!this.tocMenu.hasAttribute("open")&&window.getComputedStyle(this.tocMenu).display!=="none")}handleNotificationShelfMutation(e){const t=document.firstElementChild;if(!!t.classList.contains("js-skip-scroll-target-into-view"))for(const n of e){for(const s of n.addedNodes)if(s instanceof HTMLElement&&s.classList.contains("js-notification-top-shelf")){t.classList.add("has-notification-top-shelf");break}for(const s of n.removedNodes)if(s instanceof HTMLElement&&s.classList.contains("js-notification-top-shelf")){t.classList.remove("has-notification-top-shelf");break}}}handleSidebarResize(){me(this,oe,requestAnimationFrame(this.updateSidebarHeight))}},"DiffLayoutElement");se=new WeakMap,oe=new WeakMap,ge=new WeakMap,re=new WeakMap,O([w.Lj],F.prototype,"sidebarHidden",2),O([w.fA],F.prototype,"layoutContainer",2),O([w.fA],F.prototype,"diffToolbar",2),O([w.fA],F.prototype,"tocMenu",2),O([w.fA],F.prototype,"tocMenuButton",2),O([w.fA],F.prototype,"mainContainer",2),O([w.fA],F.prototype,"sidebarContainer",2),O([w.fA],F.prototype,"fileTree",2),O([w.fA],F.prototype,"showFileTreeButton",2),O([w.fA],F.prototype,"fileTreePathFilter",2),O([(0,et.D)(100)],F.prototype,"handleSidebarResize",1),F=O([w.Ih],F),(0,a.on)("click",".js-split-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");t.classList.add("color-border-accent-emphasis"),t.classList.remove("color-border-default"),e.classList.remove("color-border-accent-emphasis"),e.classList.add("color-border-default"),s.checked=!1,n.checked=!0}),(0,a.on)("click",".js-unified-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");t.classList.remove("color-border-accent-emphasis"),t.classList.add("color-border-default"),e.classList.add("color-border-accent-emphasis"),e.classList.remove("color-border-default"),s.checked=!0,n.checked=!1});var rn=u(11793),nt=u(53692),cn=Object.defineProperty,ln=Object.getOwnPropertyDescriptor,an=i((e,t,n,s)=>{for(var o=s>1?void 0:s?ln(t,n):t,r=e.length-1,c;r>=0;r--)(c=e[r])&&(o=(s?c(t,n,o):c(o))||o);return s&&o&&cn(t,n,o),o},"instrument_files_decorateClass");let st=i(class extends HTMLElement{constructor(){super(...arguments),this.instrumentCtrlF=e=>{const t=["Control+f","Meta+f"],n=(0,rn.EL)(e);t.includes(n)&&(0,nt.sz)(this)}}connectedCallback(){document.addEventListener("keydown",this.instrumentCtrlF)}disconnectedCallback(){document.removeEventListener("keydown",this.instrumentCtrlF)}},"InstrumentFilesElement");st=an([w.Ih],st);var dn=u(27034),un=u(2061);(0,a.on)("details:toggled",".js-pull-merging",function({currentTarget:e}){const t=Array.from(e.querySelectorAll(".js-merge-pull-request")),n=t.some(Ye.Z);for(const s of t)s.classList.toggle("is-dirty",n)}),(0,a.on)("click",".js-merge-box-try-again",async function({currentTarget:e}){const t=e.getAttribute("data-form-target");if(!["js-cleanup-branch-form","js-merge-branch-form","js-queue-branch-form","js-update-branch-form"].includes(t))return;const s=e.closest(".js-pull-merging").getElementsByClassName(t)[0];(0,a.f)(s,"submit")}),document.addEventListener("session:resume",function(e){const t=document.getElementById(e.detail.targetId);if(t){const n=t.closest(".js-merge-pull-request");if(n){const s=n.closest(".js-details-container");s&&s.classList.add("open")}}}),(0,a.on)("change",".js-admin-merge-override",function({currentTarget:e}){const t=e.closest(".js-merge-message-container"),n=e.checked,s=t.querySelector(".js-merge-box"),o=t.querySelector(".js-auto-merge-box"),r=t.querySelector(".js-merge-form"),c=t.querySelector(".js-auto-merge-form"),l=t.querySelector(".js-queue-branch-form"),h=t.querySelectorAll(".merge-box-button");s&&(s.hidden=!n),o&&(o.hidden=n),r&&(r.hidden=!n),c&&(c.hidden=n),l&&(l.hidden=n);for(const m of h)m.disabled=!n}),(0,a.on)("details-menu-selected",".js-update-branch-method-menu",fn,{capture:!0});function fn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr");n.classList.toggle("is-updating-via-merge",t.value==="merge"),n.classList.toggle("is-updating-via-rebase",t.value==="rebase");const s=n.querySelector(".js-update-branch-type");s&&(s.value=t.value)}i(fn,"updateBranchUpdateMethod"),(0,a.on)("submit",".js-update-branch-form",function({currentTarget:e}){const t=e.closest(".js-merge-pr"),n=t?.querySelector(".btn-group-update-merge");n&&(n.disabled=!0);const s=t?.querySelector(".btn-group-update-rebase");s&&(s.disabled=!0);const o=t?.querySelector(".js-update-method-menu-button");o&&(o.classList.add("disabled","user-select-none"),o.setAttribute("aria-disabled","true"));const r=t?.querySelector(".js-update-branch-method-menu");r&&r?.parentNode?.removeChild(r)}),(0,a.on)("details-menu-selected",".js-merge-method-menu",mn,{capture:!0});function mn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr"),s=n.querySelector(".js-merge-pull-request"),o=n.querySelector(".js-merge-method-menu-button"),r=o.getAttribute("data-merge-button-class");o.classList.toggle("btn-danger",t.hasAttribute("data-dangerous-action")),r&&o.classList.toggle(r,!t.hasAttribute("data-dangerous-action"));const c=n.querySelectorAll(".js-merge-title"),l=n.querySelectorAll(".js-merge-message");for(const y of c)y.defaultValue===y.value&&(y.defaultValue=y.value=t.getAttribute("data-input-title-value"));for(const y of l)y.defaultValue===y.value&&(y.defaultValue=y.value=t.getAttribute("data-input-message-value"));n.classList.toggle("is-merging",t.value==="merge"),n.classList.toggle("is-squashing",t.value==="squash"),n.classList.toggle("is-rebasing",t.value==="rebase"),n.classList.toggle("is-merging-group",t.value==="group"),n.classList.toggle("is-merging-solo",t.value==="solo"),n.classList.toggle("is-merging-jump",t.value==="jump");const h=s.classList.contains("js-admin-override-merge")&&t.value==="merge"||s.classList.contains("js-admin-override-squash")&&t.value==="squash"||s.classList.contains("js-admin-override-rebase")&&t.value==="rebase",m=n.querySelector(".js-merge-type");m&&(m.value=t.value);const f=n.querySelectorAll(".js-merge-pull-request .js-merge-commit-button,.js-confirm-auto-merge-button");for(const y of f)t.value===y.value?(y.type="submit",y.classList.contains("js-confirm-auto-merge-button")&&(0,un.j)(y)):y.type="button";s.classList.toggle("color-fg-danger",h);const p=n.closest(".js-pull-merging"),b=new URL(p.getAttribute("data-url"),window.location.origin),j=new URLSearchParams(b.search);j.set("merge_type",t.value),b.search=j.toString(),p.setAttribute("data-url",b.toString())}i(mn,"updateForMergeMethod"),(0,a.on)("details:toggled",".js-merge-pr",function(e){const n=e.currentTarget.querySelector(".js-merge-message");n&&(0,a.f)(n,"change")}),(0,d.N7)(".branch-action-item.js-details-container.open",{add(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.setAttribute("open","")},remove(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.removeAttribute("open")}}),(0,a.on)("toggle",".js-details-container .js-merge-review-section",function({currentTarget:e}){const t=e.closest(".js-details-container"),n=t.querySelectorAll(".js-merge-review-section").length,s=t.querySelectorAll(".js-merge-review-section[open]").length;s===0?(0,ne.Qp)(t,{force:!1}):s===n&&(0,ne.Qp)(t,{force:!0})},{capture:!0}),(0,d.N7)("poll-include-fragment[data-to-be-polled]",{constructor:dn.Z,add(e){function t(){e.src=e.getAttribute("data-to-be-polled"),e.removeAttribute("data-to-be-polled")}i(t,"onVisible"),document.hidden?document.addEventListener("visibilitychange",t,{once:!0}):t()}}),(0,a.on)("submit",".js-remove-from-queue-form",async e=>{const t=e.currentTarget;e.preventDefault();const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json"}});n&&n.ok||(window.onbeforeunload=()=>{window.scrollTo({top:0})},window.location.reload())});var we=u(96776);let Le=!1;document.addEventListener("keydown",function(e){e.key==="Alt"&&(Le=!0)}),document.addEventListener("keyup",function(e){e.key==="Alt"&&(Le=!1)}),(0,a.on)("click",".js-toggle-outdated-comments",function(e){if(!(e instanceof MouseEvent&&e.altKey||Le)||!(e.currentTarget instanceof HTMLElement))return;const t=e.currentTarget,n=t.closest("details");function s(){const o=n.hasAttribute("open");for(const r of document.querySelectorAll(".js-toggle-outdated-comments"))r!==t&&r.closest("details").toggleAttribute("open",o)}i(s,"toggleAll"),setTimeout(()=>{(0,we.uQ)(t,s)})});function ot(){const e=document.querySelectorAll(".pull-request-ref-restore");for(let t=0;t<e.length;t++)e[t].classList.toggle("last",t===e.length-1)}i(ot,"syncLast"),(0,d.N7)(".pull-request-ref-restore",{add:ot,remove:ot});function rt(){const e=document.querySelector("#js-pull-restorable")!=null,t=document.querySelector(".js-pull-discussion-timeline");t&&t.classList.toggle("is-pull-restorable",e)}i(rt,"syncRestorable"),(0,d.N7)("#js-pull-restorable",{add:rt,remove:rt});var gn=u(7679);function hn(e,t){const n=e.closest(".js-review-state-classes"),s=document.querySelector(".js-review-changes");n.classList.toggle("is-review-pending",t>0);for(const o of document.querySelectorAll(".js-pending-review-comment-count"))o.textContent=String(t);for(const o of document.querySelectorAll(".js-pending-comment-count-type"))o instanceof HTMLElement&&(o.textContent=o.getAttribute(t===1?"data-singular-string":"data-plural-string"));if(t>0){s.textContent=s.getAttribute("data-pending-message")||"";const o=e.querySelector(".js-reviews-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0})}else s.textContent=s.getAttribute("data-message")||""}i(hn,"updatePendingCommentsCount");function it(e){const t=document.querySelector(".js-reviews-container");t&&setTimeout(()=>hn(t,e))}i(it,"updatePendingHandler"),(0,V.AC)(".js-inline-comment-form",async function(e,t){const n=await t.text();it(n.json.pendingReviewCommentsCount)}),(0,V.AC)(".js-pending-review-comment .js-comment-delete",async function(e,t){const n=await t.text();it(n.json.pendingReviewCommentsCount)}),(0,V.AC)(".js-resolvable-timeline-thread-form",async function(e,t){try{const n=await t.html();e.closest(".js-resolvable-timeline-thread-container").replaceWith(n.html)}catch{(0,gn.v)()}}),(0,V.AC)(".js-toggle-user-reviewed-file-form",async function(e,t){const n=e.closest(".js-details-container"),s=!!n.querySelector(".js-reviewed-file"),o=n.classList.contains("open"),r=n.querySelector(".js-file-header"),c=r?r.getBoundingClientRect().top===60:!1;(!s&&o||s&&!o)&&((0,ne.Qp)(n),c&&(0,q.zT)(n));const l=e.querySelector(".js-reviewed-toggle");s?(l.classList.remove("color-bg-accent","color-border-accent"),l.classList.add("color-fg-muted","color-border-default")):(l.classList.remove("color-fg-muted","color-border-default"),l.classList.add("color-bg-accent","color-border-accent"));const h=l.querySelector(".js-reviewed-checkbox");h.disabled=!0;const m=document.querySelector("progress-bar");m instanceof he&&(s?m.decrement():m.increment());const f=document.getElementById(`file-tree-item-${n.id}`);f&&f.toggleAttribute("data-file-user-viewed");const p=await t.html(),b=e.closest(".js-replace-file-header-review");b&&(b.replaceWith(p.html),n.toggleAttribute("data-file-user-viewed"))});function Ee(e){return e.getAttribute("ratio").split("/")}i(Ee,"parseRatio");function ct(e){if(e){const[t,n]=Ee(e),s=parseInt(t)/parseInt(n),o=e.querySelector(".js-review-progress"),r=e.querySelector(".js-review-count");o instanceof HTMLElement&&r&&(o.style.width=`${s*100}%`,r.textContent=`${t} / ${n}`)}}i(ct,"refresh");class he extends HTMLElement{static get observedAttributes(){return["ratio"]}attributeChangedCallback(t){t==="ratio"&&ct(this)}connectedCallback(){ct(this)}increment(){const[t,n]=Ee(this),s=Math.min(parseInt(t)+1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}decrement(){const[t,n]=Ee(this),s=Math.min(parseInt(t)-1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}}i(he,"ProgressBarElement"),window.customElements.get("progress-bar")||(window.ProgressBarElement=he,window.customElements.define("progress-bar",he));var pn=u(7739),bn=u(14298);function lt(){for(const e of document.querySelectorAll(".js-pull-refresh-on-pjax"))(0,ue.x0)(e)}i(lt,"updateContentOnSoftNavigations"),document.addEventListener(bn.QE.SUCCESS,lt),document.addEventListener("pjax:end",lt),(0,d.N7)(".js-updating-pull-request-commits-count",{add(e){const t=e.textContent,n=document.querySelectorAll(".js-updateable-pull-request-commits-count");for(const s of n)s.textContent=t}}),(async()=>{if(await pn.x,window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_RELOAD){const e=document.getElementById("js-report-pull-request-refresh");e&&(0,nt.Fk)(e)}})();var at=u(17463),yn=u(48027);function vn(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),s=e.querySelector("button.js-diff-load"),o=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const r=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=r.toString(),t.data}i(vn,"expander_loadDiff");function pe(e){(0,ne.O4)(e),(0,q.zT)(e)}i(pe,"scrollIntoView"),(0,x.Z)(i(function(){const t=Sn(window.location.hash);!t||(0,Z.Q)(document,t.hashFragment)&&!t.lastLine||Ce(t,0)},"handleHashChange"));function Sn(e){if(!e)return;const t=(0,yn.s)(e);if(!t)return;const n=t[1],s=t[2],o=t[3],r=t[5],c=n+s+o,l=n+s;return{anchor:n,side:s,line:o,lastLine:r,hashFragment:c,partialHashFragment:l}}i(Sn,"parseExpansion");async function Ce(e,t){const{anchor:n,side:s,line:o,lastLine:r,hashFragment:c,partialHashFragment:l}=e,h=(0,Z.Q)(document,n);if(!h)return;const m=h.nextElementSibling;if(!m)return;const f=ft(m,s,o,r);if(!f.length){const y=(0,Z.Q)(document,c);if(y){pe(y);return}const T=m.querySelector(".js-diff-load-container");if(!T)return;try{await vn(T);const v=(0,Z.Q)(document,c);v instanceof HTMLElement&&pe(v)}catch{pe(m)}return}await jn(f,l);const p=1,b=(0,Z.Q)(document,c);ft(m,s,o,r).length?Ce(e,t):b?pe(b):t<p&&Ce(e,t+1)}i(Ce,"findAndActivateExpander"),(0,a.on)("click",".js-expand",function(e){e.preventDefault(),dt(e.currentTarget)});function jn(e,t){return Promise.all(e.map(n=>dt(n,t)))}i(jn,"activateExpanders");async function dt(e,t){let n;if(t){const f=t.slice(-1)==="R"?"data-right-range":"data-left-range",p=e.getAttribute(f)||"",b=parseInt(p.split("-")[0],10);n=t+b}else n=e.hash.slice(1);const s=e.getAttribute("data-url"),o=new URL(s,window.location.origin),r=new URLSearchParams(o.search.slice(1));r.append("anchor",n),o.search=r.toString(),window.location.hash!==""&&window.history.replaceState(null,"","#");const c=await(0,xe.a)(document,o.toString()),l=e.closest(".js-file");if(!l)return;const h=e.closest(".js-expandable-line"),m=ut(h,".file-diff-line");m?(0,we.uQ)(m,()=>{h.replaceWith(c)}):h.replaceWith(c),(0,a.f)(l,"expander:expanded"),An(l)}i(dt,"activateExpander");function ut(e,t){const n=e.nextElementSibling;return n instanceof HTMLElement&&n.matches(t)?n:null}i(ut,"expander_next");function ft(e,t,n,s){const o=parseInt(n,10),r=parseInt(s||"",10);return Array.from(e.querySelectorAll(".js-expand")).filter(c=>{const l=t==="R"?"data-right-range":"data-left-range",h=(c.getAttribute(l)||"").split("-"),m=parseInt(h[0],10),f=parseInt(h[1],10);return m<=o&&o<=f||o<=m&&f<=r?!0:m<=r&&r<=f})}i(ft,"findExpanders");function An(e){const t=e.querySelector(".js-expand-full-wrapper");if(!t)return;Array.from(e.querySelectorAll(".js-expand")).length===0&&t.parentElement.removeChild(t)}i(An,"removeExpandAllButton");async function wn(e,t){const n=await self.fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Request to blob_expand failed with status code ${n.status}`);return(0,at.t)((0,at.P)(e),n,!0),(await n.json()).map(o=>({...o,content:(0,ve.r)(e,o.content)}))}i(wn,"fetchManySafeDocumentFragments"),(0,a.on)("click",".js-expand-full",async e=>{e.preventDefault();const t=e.currentTarget,n=t.closest(".file"),s=t.getAttribute("data-url"),o=En(n);if(o.length===0)return;const r=new URL(s,window.location.origin),c=new URLSearchParams(r.search.slice(1));for(const f of o)c.append("ranges[]last_left",f.left.start),c.append("ranges[]left",f.left.end),c.append("ranges[]left_hunk_size",f.left.size),c.append("ranges[]last_right",f.right.start),c.append("ranges[]right",f.right.end),c.append("ranges[]right_hunk_size",f.right.size),c.append("ranges[]position",f.position);r.search=c.toString();const l=await wn(document,r.toString()),h=[...n.querySelectorAll(".js-expand")];for(const{content:f,position:p}of l){const b=parseInt(p,10),j=h[b];if(!j)return;const y=j.closest(".js-expandable-line"),T=ut(y,".file-diff-line");T?(0,we.uQ)(T,()=>{y.after(f)}):y.after(f),y.setAttribute("hidden","true")}t.setAttribute("hidden","true");const m=n.querySelector(".js-collapse-diff");m&&m.removeAttribute("hidden"),n.classList.add("open"),n.classList.add("Details--on")}),(0,a.on)("click",".js-collapse-diff",e=>{const t=e.currentTarget,n=t.closest(".file"),s=[...n.querySelectorAll('.blob-expanded[data-expanded-full="true"]')];for(const c of s)c.parentElement.removeChild(c);const o=[...n.querySelectorAll(".js-expandable-line")];for(const c of o)c.removeAttribute("hidden");t.setAttribute("hidden","true");const r=n.querySelector(".js-expand-full");r&&r.removeAttribute("hidden")});function Ln(e,t){const s=new URL(e.getAttribute("data-url"),window.location.origin).searchParams;return{position:t.toString(),left:{start:s.get("last_left"),end:s.get("left"),size:s.get("left_hunk_size")},right:{start:s.get("last_right"),end:s.get("right"),size:s.get("right_hunk_size")}}}i(Ln,"getExpanderRange");function En(e){const n=Array.from(e.querySelectorAll(".js-expand")).map((r,c)=>Ln(r,c));let s=!1;const o=[];for(let r=0;r<n.length;r++){if(s){s=!1;continue}const c=n[r],l=n[r+1];s=l&&c.left.start===l.left.start&&c.left.end===l.left.end&&c.right.start===l.right.start&&c.right.end===l.right.end,o.push(c)}return o}i(En,"getAllHunkRanges");class be{constructor(t){this.selection=t,this.anchorNode=t.anchorNode}range(){let t;return this.selection?.rangeCount>0&&(t=this.selection.getRangeAt(0)),t}canBeSideProtected(){try{return!!(this.hasSelectedText()&&this.confinedTable())}catch{return!1}}isSideProtected(){try{return!!this.confinedTable()?.getAttribute("data-lock-side-selection")}catch{return!1}}hasSelectedText(){const t=this.range();return t?t.toString().length>0:!1}clearSelectedText(){this.selection.removeAllRanges()}confinedTable(){const t=this.range()?.commonAncestorContainer?.parentElement;return t?.matches(".diff-table")?t:t?.matches(".js-file-content")?t?.querySelector("table.diff-table"):t?.closest("table.diff-table")}unprotectedSide(){let t;return this.anchorNode instanceof HTMLTableCellElement?t=this.anchorNode.closest("td[data-split-side]"):t=this.anchorNode?.parentElement?.closest("td[data-split-side]"),t?.getAttribute("data-split-side")}protectedSide(){return this.unprotectedSide()==="left"?"right":"left"}applySideProtection(){if(this.unprotectedSide()){const t=this.confinedTable(),n=this.unprotectedSide();t&&n&&t.setAttribute("data-lock-side-selection",n)}}clearSideProtection(){const t=document.querySelectorAll("table[data-lock-side-selection]");for(const n of t)n.removeAttribute("data-lock-side-selection")}filteredTableRows(){const t=[];for(let n=0;n<this.selection.rangeCount;n++){const o=this.selection.getRangeAt(n).cloneContents();if(o.querySelectorAll("td").length){const r=`td[data-split-side=${this.protectedSide()}], td.js-linkable-line-number, td.empty-cell`,c=o.querySelectorAll(r);for(const l of c)l.parentNode&&l.parentNode.removeChild(l);t.push(...o.children)}else{const r=document.createElement("TR"),c=document.createElement("TD");c.append(...o.childNodes),r.append(c),t.push(r)}}return t}contentToString(){const t=[],n=document.createElement("table");n.classList.add("invisible"),n.append(...this.filteredTableRows()),this.confinedTable()?.append(n);const s=n.children;for(let o=0;o<s.length;o++){const c=s[o].innerText;c&&(c===`
`?t.push(""):t.push(c))}return n.remove(),t.join(`
`)}}i(be,"DiffTableSideProtection");function mt(e){return Math.floor(e/2)}i(mt,"tableSide");function Cn(e){const t=e.querySelector(".js-comment-button-placeholder");if(t?.parentElement){const n=document.querySelector(".js-comment-button-template");if(!n)throw new Error("missing js-comment-button-template template element!");const s=t.dataset;if(!s)throw new Error("placeholder element has no dataset");s.originalLine=e.querySelector(".blob-code-inner")?.textContent||"";const o=new ye.R(n,s);if(t.parentElement.replaceChild(o,t),s.expandedDiff){const r=e.querySelector(".js-add-line-comment");r&&r.setAttribute("data-expanded-diff",s.expandedDiff)}}}i(Cn,"ensureCommentButton");function Te(e,t){const n=e.parentElement;!n||(Cn(n),Tn(n,e,t))}i(Te,"onHover");function Tn(e,t,n){const s=e.children;let o;if(s.length===4)for(let r=0,c=s.length;r<c;r++)s[r]===t&&(o=mt(r));for(let r=0,c=s.length;r<c;r++){const l=s[r];(o==null||mt(r)===o)&&l.classList.toggle("is-hovered",n)}}i(Tn,"updateIsHoveredClasses"),(0,d.N7)(".diff-table",function(e){let t=null;function n(){t&&Te(t,!1),t=null}i(n,"onMouseEnter");function s(c){t&&Te(t,!1),c.target instanceof HTMLElement&&(t=c.target.closest("td.blob-code"),t&&Te(t,!0))}i(s,"onMouseOver");function o(){e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",n),e.addEventListener("mouseover",s)}i(o,"add");function r(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",n),e.removeEventListener("mouseover",s)}return i(r,"remove"),{add:o,remove:r}});function gt(e){const t=document.getSelection();if(t){const n=new be(t);n.isSideProtected()&&(e.clipboardData?.setData("text/plain",n.contentToString()),e.preventDefault())}}i(gt,"copySidedContent");function ht(e){const t=document.getSelection(),n=e.button===2;if(t&&!n){const s=new be(t);s.isSideProtected()&&(s.clearSelectedText(),s.clearSideProtection())}}i(ht,"clearSidedProtection");function pt(){const e=document.getSelection();if(e){const t=new be(e);t.canBeSideProtected()?t.applySideProtection():t.clearSideProtection()}}i(pt,"protectSidedContent"),(0,d.N7)(".js-diff-container",function(){function e(){document.addEventListener("copy",gt),document.addEventListener("mousedown",ht),document.addEventListener("selectionchange",pt)}i(e,"add");function t(){document.removeEventListener("copy",gt),document.removeEventListener("mousedown",ht),document.removeEventListener("selectionchange",pt)}return i(t,"remove"),{add:e,remove:t}});var Nn=u(81431),qn=u(46263),xn=u(49815);const bt=(0,qn.D)(function(e){In(e)},200);async function In(e){const t=document.querySelector(".js-search-popover"),n=document.querySelector(".js-search-popover-content");if(!t||!n)return;t.hidden=!0;const s=document.getSelection(),o=s?.toString();if(!s||!o||o.length<=3||o.trim()===""||o.includes(`
`)||e&&s.anchorNode?.compareDocumentPosition(e)!==Node.DOCUMENT_POSITION_CONTAINS+Node.DOCUMENT_POSITION_PRECEDING)return;const r=await Mn(t,o);n.innerHTML=r,Fn(t,e,s),t.hidden=!1}i(In,"onSelectionChange");async function Mn(e,t){const n=e.getAttribute("data-search-url");if(!n)return"";const s=new URL(n,window.location.origin),o=new URLSearchParams;o.set("q",t),s.search=o.toString();try{const r=await fetch(s.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}});return r.ok?await r.text():""}catch{return""}}i(Mn,"fetchPopover");function Fn(e,t,n){e.style.position="absolute",e.style.zIndex="2";const s=t.getClientRects()[0],o=n.getRangeAt(0).getBoundingClientRect();e.style.top=`${o.bottom-s.top+50}px`,e.style.left=`${o.left-s.left-10}px`}i(Fn,"positionPopover"),(0,d.N7)(".js-search-container",e=>{function t(){document.addEventListener("selectionchange",()=>bt(e))}i(t,"add");function n(){document.removeEventListener("selectionchange",()=>bt(e))}if(i(n,"remove"),(0,xn.c)("BLACKBIRD_MONOLITH"))return{add:t,remove:n}});function K(){const e=document.querySelector("meta[name=diff-view]"),t=e&&e instanceof HTMLMetaElement?e.content:"",n=document.querySelector(".js-file-diff-split"),s=!!(t==="split"&&n||document.querySelector(".wants-full-width-container"));document.body.classList.toggle("full-width",s)}i(K,"syncBodyClass"),(0,d.N7)("meta[name=diff-view]",{add:K,remove:K}),(0,d.N7)(".js-file-diff-split",{add:K,remove:K}),(0,d.N7)(".js-compare-tab.selected",{add:K,remove:K}),(0,d.N7)(".wants-full-width-container",{add:K,remove:K}),(0,a.on)("change",".js-toggle-file-notes",function(e){const t=e.currentTarget;t.closest(".file").classList.toggle("show-inline-notes",t.checked)});function yt(e){const t=e.some(n=>n.checked);for(const n of e)(0,le.Se)(n,!t)}i(yt,"toggleCheckboxes"),(0,a.on)("click",".js-toggle-all-file-notes",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-notes"));yt(t),e.preventDefault()}),(0,a.on)("click",".js-toggle-all-file-annotations",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-check-annotations"));yt(t),e.preventDefault()}),(0,d.N7)(".js-inline-comments-container",function(e){let t;const n=e.closest(".file");if(n)return{add:t=i(function(){const o=n.querySelector(".js-inline-comments-container")!=null;n.classList.toggle("has-inline-notes",o)},"remove"),remove:t}}),(0,a.on)("change",".js-toggle-file-check-annotations",function(e){const t=e.currentTarget,n=t.closest(".file").querySelectorAll(".js-inline-annotations");for(const s of n)s instanceof HTMLElement&&(s.hidden=!t.checked)});var kn=Object.defineProperty,Rn=Object.getOwnPropertyDescriptor,Q=i((e,t,n,s)=>{for(var o=s>1?void 0:s?Rn(t,n):t,r=e.length-1,c;r>=0;r--)(c=e[r])&&(o=(s?c(t,n,o):c(o))||o);return s&&o&&kn(t,n,o),o},"diff_file_filter_element_decorateClass");let $=i(class extends HTMLElement{connectedCallback(){this.filterState={hideDeletedFiles:!1,hideViewedFiles:!1,showManifestFilesOnly:!1,selectedOwners:[],showCodeownersFiles:!1,selectedFileTypes:[],fileTypeFilterActive:!1,filtersActive:!1}}applyFilter(e){this.filterState=e.detail,this.showResetFilters(),this.filterFiles(),this.filterTreeFiles(),this.hideEmptyDirectories(),this.showBlankslateIfEmpty()}clearFilters(e){e.preventDefault(),this.fileFilter.clearFilters()}filterFiles(){for(const e of this.diffEntries){const t=e.closest(".js-file.js-details-container");t.hidden=!this.shouldShowFile(e)}}filterTreeFiles(){for(const e of this.treeEntries){const t=this.shouldShowFile(e);e.hidden=!t,e.toggleAttribute("data-skip-substring-filter",!t)}}hideEmptyDirectories(){this.treeRoot&&this.hideEmptyDirectory(this.treeRoot)}hideEmptyDirectory(e){const t=e.getAttribute("data-tree-entry-type")==="root",n=e.getAttribute("data-tree-entry-type")==="directory";if(t||n){const s=e.querySelectorAll(t?":scope > .js-tree-node":":scope > ul > .js-tree-node");let o=0;for(const r of s)o=o+this.hideEmptyDirectory(r);return o===0?(e.hidden=!0,0):(e.hidden=!1,1)}return e.hidden?0:1}async refilterAfterAsyncLoad(){await Promise.resolve(),this.refilterLoadedFiles(),this.showBlankslateIfEmpty()}refilterLoadedFiles(){this.filterState.filtersActive&&this.filterFiles()}shouldShowFile(e){let t=!0;const n=e.getAttribute("data-file-type");return n&&(t=this.filterState.selectedFileTypes.includes(n)),this.filterState.hideViewedFiles&&t&&e.hasAttribute("data-file-user-viewed")&&(t=!1),this.filterState.showCodeownersFiles&&t&&(t=(e.getAttribute("data-codeowners")||"").split(",").filter(o=>this.filterState.selectedOwners.includes(o)).length>0),this.filterState.hideDeletedFiles&&t&&e.getAttribute("data-file-deleted")==="true"&&(t=!1),this.filterState.showManifestFilesOnly&&t&&(e.hasAttribute("data-file-manifest")||(t=!1)),t}showResetFilters(){this.resetFilters&&(this.resetFilters.hidden=!this.filterState.filtersActive)}showBlankslateIfEmpty(){if(!this.blankslate)return;if(this.progressiveLoaders.length>0){this.blankslate.hidden=!0;return}if(this.diffEntries.length===0){this.blankslate.hidden=!0;return}const e=Array.from(this.diffEntries).some(t=>!t.hidden);this.blankslate.hidden=e}},"DiffFileFilterElement");Q([w.fA],$.prototype,"blankslate",2),Q([w.fA],$.prototype,"resetFilters",2),Q([w.GO],$.prototype,"diffEntries",2),Q([w.GO],$.prototype,"progressiveLoaders",2),Q([w.GO],$.prototype,"treeEntries",2),Q([w.fA],$.prototype,"treeRoot",2),Q([w.fA],$.prototype,"fileFilter",2),Q([(0,et.D)(20)],$.prototype,"hideEmptyDirectories",1),$=Q([w.Ih],$);var _n=u(12737),On=Object.defineProperty,Bn=Object.getOwnPropertyDescriptor,Dn=i((e,t,n,s)=>{for(var o=s>1?void 0:s?Bn(t,n):t,r=e.length-1,c;r>=0;r--)(c=e[r])&&(o=(s?c(t,n,o):c(o))||o);return s&&o&&On(t,n,o),o},"input_demux_context_wrapper_decorateClass");class vt{onItemSelected(t){if(!(t.currentTarget instanceof HTMLButtonElement))return;const n=t.currentTarget.querySelector(".js-ref-name").textContent,s=document.querySelector(".js-new-base-branch");s.value=btoa(unescape(encodeURIComponent(n||"")));const o=document.querySelector(".js-change-base-template").content.cloneNode(!0);o instanceof DocumentFragment&&(0,_n.W)({content:o})}}i(vt,"InputDemuxBaseChangeContext");let St=i(class extends HTMLElement{connectedCallback(){const e=this.getAttribute("data-context-type"),t={baseChange:new vt};this.context=t[e]}onItemSelected(e){this.context.onItemSelected(e)}},"InputDemuxContextWrapperElement");St=Dn([w.Ih],St);var $n=u(49662),Un=u(19832),Wn=u(44780),Vn=u(80193)},97730:(D,k,u)=>{u.d(k,{j:()=>R,w:()=>x});var a=u(59753),q=u(55741),L=u(45075);(0,a.on)("click",".js-toggle-inline-comment-form",function(d){const S=d.currentTarget.closest(".js-line-comments");R(S)}),(0,a.on)("quote-selection",".js-line-comments",function(d){R(d.currentTarget),d.stopPropagation()}),(0,L.w4)("keydown",".js-inline-comment-form-container form .js-comment-field",function(d){const S=d.target;if(!S.classList.contains("js-navigation-enable")&&d.key==="Escape"&&S.value.length===0){const M=S.closest("form");x(M),d.preventDefault()}}),(0,a.on)("click",".js-hide-inline-comment-form",function(d){const S=d.currentTarget.closest("form");!(0,q.T)(S)||confirm(d.target.getAttribute("data-confirm-cancel-text"))?x(S):d.preventDefault()});function R(d){const S=d.querySelector(".js-inline-comment-form-container");S.classList.add("open"),S.querySelector(".js-write-tab")?.click(),S.querySelector(".js-comment-field").focus(),(0,a.f)(S,"inlinecomment:focus")}i(R,"focusForm");function x(d){d.reset();const S=d.closest(".js-inline-comment-form-container");S.classList.remove("open");const M=S.querySelector(".js-multi-line-preview");M&&(M.hidden=!0),(0,a.f)(S,"inlinecomment:collapse")}i(x,"blurForm")},12737:(D,k,u)=>{u.d(k,{W:()=>q});var a=u(59753);async function q(L){const x=document.querySelector("#site-details-dialog").content.cloneNode(!0),d=x.querySelector("details"),S=d.querySelector("details-dialog"),M=d.querySelector(".js-details-dialog-spinner");L.detailsClass&&d.classList.add(...L.detailsClass.split(" ")),L.dialogClass&&S.classList.add(...L.dialogClass.split(" ")),L.label?S.setAttribute("aria-label",L.label):L.labelledBy&&S.setAttribute("aria-labelledby",L.labelledBy),document.body.append(x);const _=await L.content;return M.remove(),S.prepend(_),d.addEventListener("toggle",()=>{d.hasAttribute("open")||((0,a.f)(S,"dialog:remove"),d.remove())}),S}i(q,"dialog")},62760:(D,k,u)=>{u.d(k,{X:()=>q});var a=u(6170);function q(L,R,x,d,S,M,_,Y){const U=document.querySelector(".js-file-filter"),W=new URL(window.location.href,window.location.origin);if(!L&&!d)return R||M?void 0:(W.search="",(0,a.lO)((0,a.y0)(),"",W.toString()));const ee=U.querySelector(".js-file-filter-form"),N=new FormData(ee),g=x.filter(C=>!N.getAll("file-filters[]").includes(C)),E=S.filter(C=>!N.getAll("owned-by[]").includes(C));for(const C of g)N.append("file-filters[]",C);for(const C of E)N.append("owned-by[]",C);const A=new URLSearchParams(N);(!A.has("file-filters[]")||A.toString()==="")&&A.set("file-filters[]",""),R&&A.set("w","1"),M&&A.set("manifests","true"),_&&A.set("show-deleted-files","false"),Y&&A.set("show-viewed-files","false"),A.delete("authenticity_token"),W.search=A.toString(),(0,a.lO)((0,a.y0)(),"",W.toString())}i(q,"updateURLState")},55741:(D,k,u)=>{u.d(k,{M:()=>L,T:()=>R});var a=u(14840),q=u(56238);function L(g,E=!1){return R(g)||Y(g,E)||ee(g)||N(g)}i(L,"hasInteractions");function R(g){for(const E of g.querySelectorAll("input, textarea"))if((E instanceof HTMLInputElement||E instanceof HTMLTextAreaElement)&&x(E))return!0;return!1}i(R,"hasDirtyFields");function x(g){if(g instanceof HTMLInputElement&&(g.type==="checkbox"||g.type==="radio")){if(g.checked!==g.defaultChecked)return!0}else if(g.value!==g.defaultValue)return!0;return!1}i(x,"formFieldValueChanged");let d;async function S(g,E){d=g;try{await E()}finally{d=null}}i(S,"withActiveElement");function M(g){return d instanceof Element?d:g&&g.ownerDocument&&g.ownerDocument.activeElement?g.ownerDocument.activeElement:null}i(M,"getActiveElement");let _;document.addEventListener("mouseup",function(g){_=g.target});function Y(g,E){const A=M(g);return A===null||E&&A===g?!1:A===g&&(0,q.sw)(A)||g.contains(A)&&!W(A)?!0:_ instanceof Element&&g.contains(_)&&!!_.closest("details[open] > summary")}i(Y,"hasFocus");const U="a[href], button";function W(g){if(g instanceof a.Z)return!0;const E=g instanceof HTMLAnchorElement||g instanceof HTMLButtonElement,A=g.parentElement?.classList.contains("task-list-item");if(E&&A)return!0;if(!(_ instanceof Element))return!1;const C=g.closest(U);if(!C)return!1;const te=_.closest(U);return C===te}i(W,"activeElementIsSafe");function ee(g){return g.matches(":active:enabled")}i(ee,"hasMousedown");function N(g){return!!(g.closest(".is-dirty")||g.querySelector(".is-dirty"))}i(N,"markedAsDirty")}},D=>{var k=i(a=>D(D.s=a),"__webpack_exec__");D.O(0,["vendors-node_modules_selector-observer_dist_index_esm_js","vendors-node_modules_delegated-events_dist_index_js-node_modules_github_details-dialog-elemen-63debe","vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js","vendors-node_modules_virtualized-list_es_index_js-node_modules_github_template-parts_lib_index_js","vendors-node_modules_github_clipboard-copy-element_dist_index_esm_js-node_modules_github_remo-8e6bec","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_scroll-anchoring_di-a017b0","app_assets_modules_github_soft-nav_navigate_ts","app_assets_modules_github_diffs_blob-lines_ts-app_assets_modules_github_diffs_linkable-line-n-f314c3","app_assets_modules_github_behaviors_details_ts-app_assets_modules_github_behaviors_include-fr-a78de3","app_assets_modules_github_fetch_ts-app_assets_modules_github_input-demux_ts-app_assets_module-e5b55c"],()=>k(7274));var u=D.O()}]);})();

//# sourceMappingURL=diffs-bc57d9fb6abe.js.map