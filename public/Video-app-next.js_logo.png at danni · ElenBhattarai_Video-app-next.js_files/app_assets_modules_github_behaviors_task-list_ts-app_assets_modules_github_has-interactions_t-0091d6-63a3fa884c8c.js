"use strict";(()=>{var ot=Object.defineProperty;var i=(O,L)=>ot(O,"name",{value:L,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_behaviors_task-list_ts-app_assets_modules_github_has-interactions_t-0091d6"],{72669:(O,L,c)=>{c.d(L,{L$:()=>m,SE:()=>V,nj:()=>y});var k=c(6741),w=c(59753),h=c(40987),v=c(64463),l=c(65935),r=c(56238);(0,v.N7)(".js-task-list-container .js-task-list-field",function(t){const n=t.closest(".js-task-list-container");m(n),$(n)}),(0,v.N7)(".js-convert-tasklist-to-block-enabled .contains-task-list",function(t){const n=Z(t);if(!n||Array.from(n.children).some(a=>a.classList.contains("task-list-item-convert-container")))return;const u=t.ownerDocument.querySelector(".js-convert-to-block-template")?.content.cloneNode(!0);!u||n.appendChild(u)}),(0,w.on)("task-lists-move","task-lists",function(t){const{src:n,dst:e}=t.detail,o=t.currentTarget.closest(".js-task-list-container");f(o,"reordered",{operation:"move",src:n,dst:e})}),(0,w.on)("task-lists-check","task-lists",function(t){const{position:n,checked:e}=t.detail,o=t.currentTarget.closest(".js-task-list-container");f(o,`checked:${e?1:0}`,{operation:"check",position:n,checked:e})}),(0,w.on)("click",".js-convert-to-block-button",function(t){const n=Z(t.target);if(!n)return;if(!n.closest("task-lists"))throw new Error("parent not found");const o=V(n),u=t.currentTarget.closest(".js-task-list-container");f(u,"converted",{operation:"convert_to_block",position:o})});function m(t){if(t.querySelector(".js-task-list-field")){const n=t.querySelectorAll("task-lists");for(const e of n)if(e instanceof h.Z){e.disabled=!1;const o=e.querySelectorAll("button");for(const u of o)u.disabled=!1}}}i(m,"enableTaskList");function y(t){for(const n of t.querySelectorAll("task-lists"))if(n instanceof h.Z){n.disabled=!0;const e=n.querySelectorAll("button");for(const o of e)o.disabled=!0}}i(y,"disableTaskList");function f(t,n,e){const o=t.querySelector(".js-comment-update");y(t),$(t);const u=o.elements.namedItem("task_list_track");u instanceof Element&&u.remove();const a=o.elements.namedItem("task_list_operation");a instanceof Element&&a.remove();const E=document.createElement("input");E.setAttribute("type","hidden"),E.setAttribute("name","task_list_track"),E.setAttribute("value",n),o.appendChild(E);const b=document.createElement("input");if(b.setAttribute("type","hidden"),b.setAttribute("name","task_list_operation"),b.setAttribute("value",JSON.stringify(e)),o.appendChild(b),!o.elements.namedItem("task_list_key")){const M=o.querySelector(".js-task-list-field").getAttribute("name").split("[")[0],D=document.createElement("input");D.setAttribute("type","hidden"),D.setAttribute("name","task_list_key"),D.setAttribute("value",M),o.appendChild(D)}t.classList.remove("is-comment-stale"),(0,r.Bt)(o)}i(f,"saveTaskList"),(0,l.AC)(".js-task-list-container .js-comment-update",async function(t,n){const e=t.closest(".js-task-list-container"),o=t.elements.namedItem("task_list_track");o instanceof Element&&o.remove();const u=t.elements.namedItem("task_list_operation");u instanceof Element&&u.remove();let a;try{a=await n.json()}catch(E){let b;try{b=JSON.parse(E.response.text)}catch{}if(b&&b.stale){const I=e.querySelector(".js-task-list-field");I.classList.add("session-resumable-canceled"),I.classList.remove("js-session-resumable")}else E.response.status===422||window.location.reload()}a&&(u&&a.json.source&&(e.querySelector(".js-task-list-field").value=a.json.source),m(e),requestAnimationFrame(()=>$(e)))});let A=!1,_=!1,C=null;function p(t){t.inputType==="insertLineBreak"?A=!0:A=!1}i(p,"tryAutoCompleteOnBeforeInput");function d(t){const n=t;if(!A&&!(n.inputType==="insertLineBreak"))return;const e=n.target;s(e),A=!1}i(d,"autoCompleteOnInput");function s(t){const n=tt(t.value,[t.selectionStart,t.selectionEnd]);n!==void 0&&g(t,n)}i(s,"listAutocomplete");function g(t,n){if(C===null||C===!0){t.contentEditable="true";try{A=!1;let e;n.commandId===X.insertText?(e=n.autocompletePrefix,n.writeSelection[0]!==null&&n.writeSelection[1]!==null&&(t.selectionStart=n.writeSelection[0],t.selectionEnd=n.writeSelection[1])):t.selectionStart=n.selection[0],C=document.execCommand(n.commandId,!1,e)}catch{C=!1}t.contentEditable="false"}if(!C){try{document.execCommand("ms-beginUndoUnit")}catch{}t.value=n.text;try{document.execCommand("ms-endUndoUnit")}catch{}t.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}n.selection[0]!=null&&n.selection[1]!=null&&(t.selectionStart=n.selection[0],t.selectionEnd=n.selection[1])}i(g,"updateElementText");function T(t){if(_)return;const n=t;if(n.key==="Enter"&&n.shiftKey&&!n.metaKey){const e=n.target,o=J(e.value,[e.selectionStart,e.selectionEnd]);if(o===void 0)return;g(e,o),n.preventDefault(),(0,w.f)(e,"change")}}i(T,"handleShiftEnter");function B(){_=!0}i(B,"onCompositionStart");function q(){_=!1}i(q,"onCompositionEnd");function F(t){if(_)return;const n=t;if(n.key==="Escape"){nt(t);return}if(n.key!=="Tab")return;const e=n.target,o=et(e.value,[e.selectionStart,e.selectionEnd],n.shiftKey);o!==void 0&&(n.preventDefault(),g(e,o))}i(F,"updateIndentation"),(0,v.N7)(".js-task-list-field",{subscribe:t=>(0,k.qC)((0,k.RB)(t,"keydown",F),(0,k.RB)(t,"keydown",T),(0,k.RB)(t,"beforeinput",p),(0,k.RB)(t,"input",d),(0,k.RB)(t,"compositionstart",B),(0,k.RB)(t,"compositionend",q))});var X=(t=>(t.insertText="insertText",t.delete="delete",t))(X||{});const G=/^(\s*)?/;function J(t,n){const e=n[0];if(!e||!t)return;const o=t.substring(0,e).split(`
`),a=o[o.length-1]?.match(G);if(!a)return;const b=`
${a[1]||""}`;return{text:t.substring(0,e)+b+t.substring(e),autocompletePrefix:b,selection:[e+b.length,e+b.length],commandId:"insertText",writeSelection:[null,null]}}i(J,"addSoftNewline");const Q=/^(\s*)([*-]|(\d+)\.)\s(\[[\sx]\]\s)?/;function Y(t,n){let e=t.split(`
`);return e=e.map(o=>{if(o.replace(/^\s+/,"").startsWith(`${n}.`)){const u=o.replace(`${n}`,`${n+1}`);return n+=1,u}return o}),e.join(`
`)}i(Y,"updateRemainingNumberBullets");function tt(t,n){const e=n[0];if(!e||!t)return;const o=t.substring(0,e).split(`
`),u=o[o.length-2],a=u?.match(Q);if(!a)return;const E=a[0],b=a[1],I=a[2],x=parseInt(a[3],10),M=Boolean(a[4]),D=!isNaN(x);let R=`${D?`${x+1}.`:I} ${M?"[ ] ":""}`,j=t.indexOf(`
`,e);j<0&&(j=t.length);const N=t.substring(e,j);if(N.startsWith(R)&&(R=""),u.replace(E,"").trim().length>0||N.trim().length>0){let S=`${b}${R}`,P=t.substring(e);const U=S.length;let W=[null,null];const st=/^\s*$/g;let z=t.substring(0,e)+S+P;return D&&!t.substring(e).match(st)&&(P=Y(t.substring(e),x+1),S+=P,W=[e,e+S.length],z=t.substring(0,e)+S),{text:z,autocompletePrefix:S,selection:[e+U,e+U],commandId:"insertText",writeSelection:W}}else{const S=e-`
${E}`.length;return{autocompletePrefix:"",text:t.substring(0,S)+t.substring(e),selection:[S,S],commandId:"delete",writeSelection:[null,null]}}}i(tt,"autocompletedList");function et(t,n,e){const o=n[0]||0,u=n[1]||o;if(n[0]===null||o===u)return;const a=t.substring(0,o).lastIndexOf(`
`)+1,E=t.indexOf(`
`,u-1),b=E>0?E:t.length-1,I=t.substring(a,b).split(`
`);let x=!1,M=0,D=0;const K=[];for(const H of I){const S=H.match(/^\s*/);if(S){let P=S[0];const U=H.substring(P.length);if(e){const W=P.length;P=P.slice(0,-2),M=x?M:P.length-W,x=!0,D+=P.length-W}else P+="  ",M=2,D+=2;K.push(P+U)}}const R=K.join(`
`),j=t.substring(0,a)+R+t.substring(b),N=[Math.max(a,o+M),u+D];return{text:j,selection:N,autocompletePrefix:R,commandId:"insertText",writeSelection:[a,b]}}i(et,"indent");function V(t){const n=t.closest("task-lists");if(!n)throw new Error("parent not found");return Array.from(n.querySelectorAll("ol.contains-task-list, ul.contains-task-list")).indexOf(t)}i(V,"listIndex");function nt(t){const e=t.target;e.selectionDirection==="backward"?e.selectionEnd=e.selectionStart:e.selectionStart=e.selectionEnd}i(nt,"deselectText");function $(t){if(document.querySelectorAll("tracked-issues-progress").length===0||t.closest(".js-timeline-item"))return;const e=t.querySelectorAll(".js-comment-body [type=checkbox]"),o=e.length,u=Array.from(e).filter(E=>E.checked).length,a=document.querySelectorAll("tracked-issues-progress[data-type=checklist]");for(const E of a)E.setAttribute("data-completed",String(u)),E.setAttribute("data-total",String(o))}i($,"updateProgress");function Z(t){let n=t.closest(".contains-task-list"),e=n;for(;(e=e.parentElement.closest(".contains-task-list"))!==n&&e!==null;)n=e;return n}i(Z,"findTopLevelTasklistContainer")},12737:(O,L,c)=>{c.d(L,{W:()=>w});var k=c(59753);async function w(h){const l=document.querySelector("#site-details-dialog").content.cloneNode(!0),r=l.querySelector("details"),m=r.querySelector("details-dialog"),y=r.querySelector(".js-details-dialog-spinner");h.detailsClass&&r.classList.add(...h.detailsClass.split(" ")),h.dialogClass&&m.classList.add(...h.dialogClass.split(" ")),h.label?m.setAttribute("aria-label",h.label):h.labelledBy&&m.setAttribute("aria-labelledby",h.labelledBy),document.body.append(l);const f=await h.content;return y.remove(),m.prepend(f),r.addEventListener("toggle",()=>{r.hasAttribute("open")||((0,k.f)(m,"dialog:remove"),r.remove())}),m}i(w,"dialog")},29719:(O,L,c)=>{c.d(L,{D:()=>v,a:()=>h});var k=c(17463),w=c(12981);async function h(l,r,m){const y=new Request(r,m);y.headers.append("X-Requested-With","XMLHttpRequest");const f=await self.fetch(y);if(f.status<200||f.status>=300)throw new Error(`HTTP ${f.status}${f.statusText||""}`);return(0,k.t)((0,k.P)(l),f),(0,w.r)(l,await f.text())}i(h,"fetchSafeDocumentFragment");function v(l,r,m=1e3){return i(async function y(f){const A=new Request(l,r);A.headers.append("X-Requested-With","XMLHttpRequest");const _=await self.fetch(A);if(_.status<200||_.status>=300)throw new Error(`HTTP ${_.status}${_.statusText||""}`);if(_.status===200)return _;if(_.status===202)return await new Promise(C=>setTimeout(C,f)),y(f*1.5);throw new Error(`Unexpected ${_.status} response status from poll endpoint`)},"poll")(m)}i(v,"fetchPoll")},55741:(O,L,c)=>{c.d(L,{M:()=>h,T:()=>v});var k=c(14840),w=c(56238);function h(s,g=!1){return v(s)||A(s,g)||p(s)||d(s)}i(h,"hasInteractions");function v(s){for(const g of s.querySelectorAll("input, textarea"))if((g instanceof HTMLInputElement||g instanceof HTMLTextAreaElement)&&l(g))return!0;return!1}i(v,"hasDirtyFields");function l(s){if(s instanceof HTMLInputElement&&(s.type==="checkbox"||s.type==="radio")){if(s.checked!==s.defaultChecked)return!0}else if(s.value!==s.defaultValue)return!0;return!1}i(l,"formFieldValueChanged");let r;async function m(s,g){r=s;try{await g()}finally{r=null}}i(m,"withActiveElement");function y(s){return r instanceof Element?r:s&&s.ownerDocument&&s.ownerDocument.activeElement?s.ownerDocument.activeElement:null}i(y,"getActiveElement");let f;document.addEventListener("mouseup",function(s){f=s.target});function A(s,g){const T=y(s);return T===null||g&&T===s?!1:T===s&&(0,w.sw)(T)||s.contains(T)&&!C(T)?!0:f instanceof Element&&s.contains(f)&&!!f.closest("details[open] > summary")}i(A,"hasFocus");const _="a[href], button";function C(s){if(s instanceof k.Z)return!0;const g=s instanceof HTMLAnchorElement||s instanceof HTMLButtonElement,T=s.parentElement?.classList.contains("task-list-item");if(g&&T)return!0;if(!(f instanceof Element))return!1;const B=s.closest(_);if(!B)return!1;const q=f.closest(_);return B===q}i(C,"activeElementIsSafe");function p(s){return s.matches(":active:enabled")}i(p,"hasMousedown");function d(s){return!!(s.closest(".is-dirty")||s.querySelector(".is-dirty"))}i(d,"markedAsDirty")},17463:(O,L,c)=>{c.d(L,{P:()=>k,t:()=>h});function k(v){const l=[...v.querySelectorAll("meta[name=html-safe-nonce]")].map(r=>r.content);if(l.length<1)throw new Error("could not find html-safe-nonce on document");return l}i(k,"getDocumentHtmlSafeNonces");class w extends Error{constructor(l,r){super(`${l} for HTTP ${r.status}`),this.response=r}}i(w,"ResponseError");function h(v,l,r=!1){const m=l.headers.get("content-type")||"";if(!r&&!m.startsWith("text/html"))throw new w(`expected response with text/html, but was ${m}`,l);if(r&&!(m.startsWith("text/html")||m.startsWith("application/json")))throw new w(`expected response with text/html or application/json, but was ${m}`,l);const y=l.headers.get("x-html-safe");if(y){if(!v.includes(y))throw new w("response X-HTML-Safe nonce did not match",l)}else throw new w("missing X-HTML-Safe nonce",l)}i(h,"verifyResponseHtmlSafeNonce")},25833:(O,L,c)=>{c.d(L,{Z:()=>C});var k=c(12737),w=c(29719),h=c(64463);function v(p){return new Promise(d=>{p.addEventListener("dialog:remove",d,{once:!0})})}i(v,"waitForDialogClose");function l(p){const d=document.querySelector(".sso-modal");!d||(d.classList.remove("success","error"),p?d.classList.add("success"):d.classList.add("error"))}i(l,"setModalStatus");function r(p){const d=document.querySelector("meta[name=sso-expires-around]");d&&d.setAttribute("content",p)}i(r,"updateExpiresAroundTag");async function m(){const p=document.querySelector("link[rel=sso-modal]"),d=await(0,k.W)({content:(0,w.a)(document,p.href),dialogClass:"sso-modal"});let s=null;const g=window.external;if(g.ssoComplete=function(T){T.error?(s=!1,l(s)):(s=!0,l(s),r(T.expiresAround),window.focus()),g.ssoComplete=null},await v(d),!s)throw new Error("sso prompt canceled")}i(m,"ssoPrompt"),(0,h.N7)(".js-sso-modal-complete",function(p){if(window.opener&&window.opener.external.ssoComplete){const d=p.getAttribute("data-error"),s=p.getAttribute("data-expires-around");window.opener.external.ssoComplete({error:d,expiresAround:s}),window.close()}else{const d=p.getAttribute("data-fallback-url");d&&(window.location.href=d)}});function y(p){if(!(p instanceof HTMLMetaElement))return!0;const d=parseInt(p.content);return new Date().getTime()/1e3>d}i(y,"expiresSoon");async function f(){const p=document.querySelector("link[rel=sso-session]"),d=document.querySelector("meta[name=sso-expires-around]");if(!(p instanceof HTMLLinkElement)||!y(d))return!0;const s=p.href;return await(await fetch(s,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json()}i(f,"fetchSsoStatus");let A=null;function _(){A=null}i(_,"clearActiveSsoPrompt");async function C(){await f()||(A||(A=m().then(_).catch(_)),await A)}i(C,"__WEBPACK_DEFAULT_EXPORT__")}}]);})();

//# sourceMappingURL=app_assets_modules_github_behaviors_task-list_ts-app_assets_modules_github_has-interactions_t-0091d6-1b4b5ea2e554.js.map